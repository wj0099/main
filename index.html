<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ì¥ì• ë¬¼ ë‹¬ë¦¬ê¸° ê²Œì„</title>

  <!-- === CSS === -->
  <style>
    /* ë ˆì´ì•„ì›ƒ -------------------------------------------------- */
    body{
      margin:0; padding:0;
      background:#eef;
      display:flex; justify-content:center; align-items:center;
      height:100vh; overflow:hidden;
      font-family:Verdana, Geneva, Tahoma, sans-serif;
    }
    #game{
      position:relative;
      width:800px; height:250px;
      background:#fff;
      border:4px solid #333;
      overflow:hidden;
      box-shadow:0 8px 25px rgba(0,0,0,.15);
    }

    /* ì£¼ì¸ê³µ ---------------------------------------------------- */
    #player{
      position:absolute; left:50px; bottom:0;
      width:40px; height:60px;
      background:#ff4d4d;
      border-radius:6px;
    }

    /* ì¥ì• ë¬¼ ---------------------------------------------------- */
    #obstacle{
      position:absolute; right:-50px; bottom:0;
      width:40px; height:60px;
      background:#333;
      animation: obstacleMove 2.5s linear infinite;
    }
    @keyframes obstacleMove{
      0%   { right:-50px; }
      100% { right:850px; }  /* ê²Œì„íŒ ë„ˆë¹„ + ì—¬ë¶„ */
    }

    /* ì í”„ ì• ë‹ˆë©”ì´ì…˜ ------------------------------------------ */
    .jump{ animation: jump .5s ease-out; }
    @keyframes jump{
      0%   { bottom:0; }
      50%  { bottom:120px; }  /* ì í”„ ë†’ì´ */
      100% { bottom:0; }
    }

    /* UI ìš”ì†Œ --------------------------------------------------- */
    #score{
      position:absolute; top:10px; left:15px;
      font-size:20px; font-weight:bold;
      color:#000;
    }
    #message{
      position:absolute; top:50%; left:50%;
      transform:translate(-50%,-50%);
      text-align:center; display:none;
      color:#222;
    }
    #message span{ font-size:32px; font-weight:bold; }
    #message button{
      margin-top:15px; padding:10px 22px;
      font-size:18px; border:none; border-radius:4px;
      cursor:pointer; background:#0066ff; color:#fff;
    }
    /* ë‹¤í¬ëª¨ë“œ ìŠ¤ìœ„ì¹˜ */
    .darkmode{ position:fixed; top:12px; right:14px; font-size:14px; user-select:none; }
  </style>
</head>
<body>

<!-- === HTML === -->
<div id="game">
  <div id="player"></div>
  <div id="obstacle"></div>

  <div id="score">Score: 0</div>

  <div id="message">
    <span id="msgText">Game Over</span><br>
    <button id="restart">Restart</button>
  </div>
</div>

<label class="darkmode">
  <input type="checkbox" id="toggleDark"> Dark Mode
</label>

<!-- === JavaScript === -->
<script>
  const player = document.getElementById('player');
  const obstacle = document.getElementById('obstacle');
  const scoreEl = document.getElementById('score');
  const msgBox = document.getElementById('message');
  const msgText = document.getElementById('msgText');
  const restartBtn = document.getElementById('restart');
  const toggleDark = document.getElementById('toggleDark');

  let score = 0;
  let alive = true;
  let obstacleSpeed = 2500;   // ms (ì†ë„)

  /* 1) ì í”„ --------------------------------------------------- */
  function jump(){
    if(player.classList.contains('jump')) return; // ì—°íƒ€ ë°©ì§€
    player.classList.add('jump');
    setTimeout(()=>player.classList.remove('jump'), 500);
  }
  document.addEventListener('keydown', e=>{
    if(!alive) return;
    if(e.code === 'Space' || e.code === 'ArrowUp'){
      jump();
    }
  });

  /* 2) ì¶©ëŒ ì²´í¬ --------------------------------------------- */
  function isHit(){
    const p = player.getBoundingClientRect();
    const o = obstacle.getBoundingClientRect();
    return ( p.right  > o.left &&
             p.left   < o.right &&
             p.bottom > o.top  &&
             p.top    < o.bottom );
  }

  /* 3) ë£¨í”„(ì ìˆ˜Â·ì¶©ëŒ) ---------------------------------------- */
  function update(){
    if(!alive) return;

    if(isHit()){
      gameOver();
      return;
    }
    score++;
    scoreEl.textContent = 'Score: ' + score;

    // ì¼ì • ì ìˆ˜ë§ˆë‹¤ ì†ë„ ìƒìŠ¹
    if(score % 500 === 0){ speedUp(); }

    requestAnimationFrame(update);
  }

  /* 4) ë‚œì´ë„ ìƒìŠ¹ ------------------------------------------- */
  function speedUp(){
    obstacleSpeed *= 0.9; // 10% ë¹¨ë¼ì§
    obstacle.style.animation = 'none';   // ë¦¬ì…‹
    void obstacle.offsetWidth;           // ê°•ì œ ì¬ê³„ì‚°
    obstacle.style.animation = `obstacleMove ${obstacleSpeed}ms linear infinite`;
  }

  /* 5) ê²Œì„ì˜¤ë²„/ì¬ì‹œì‘ ---------------------------------------- */
  function gameOver(){
    alive = false;
    msgText.textContent = `Game Over ğŸ˜µ\nScore: ${score}`;
    msgBox.style.display = 'block';
    obstacle.style.animationPlayState = 'paused';
  }
  restartBtn.addEventListener('click', ()=>{
    score = 0;
    scoreEl.textContent = 'Score: 0';
    msgBox.style.display = 'none';
    alive = true;
    obstacle.style.animation = 'none';
    void obstacle.offsetWidth;
    obstacle.style.animation = `obstacleMove ${obstacleSpeed}ms linear infinite`;
    requestAnimationFrame(update);
  });

  /* 6) ë‹¤í¬ëª¨ë“œ í† ê¸€ ------------------------------------------ */
  toggleDark.addEventListener('change', e=>{
    if(e.target.checked){
      document.body.style.background = '#111';
      game.style.background          = '#222';
      game.style.borderColor         = '#ddd';
      scoreEl.style.color            = '#fff';
    }else{
      document.body.style.background = '#eef';
      game.style.background          = '#fff';
      game.style.borderColor         = '#333';
      scoreEl.style.color            = '#000';
    }
  });

  /* 7) ê²Œì„ ì‹œì‘ ---------------------------------------------- */
  requestAnimationFrame(update);
</script>
</body>
</html>
